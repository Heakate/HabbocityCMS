! function() {
    "use strict";

    function t(t) {
        this.metadataManager = t, this.eventSourceObj = null
    }

    function e(t) {
        this.metadataManager = t, this.pollingType = null, this.pollingInterval = null, this.pollingObj = null, this.pollingTimer = null
    }

    function a(t) {
        this.sdkInstance = t, this._adBreakCount = 0, this._lastAdID = "", this._timeoutsAdStart = [], this._timeoutsAdFinish = []
    }

    function n(t) {
        this.companionBanner = t, this.fallbackRefreshInterval = 3e4, this._refreshFillerTimer = null, this._onStartTimer = null, this._outOfContextTimer = null
    }

    function i(t) {
        var e = {}; 
        if (t) try {
            t = T.unescape(t)
        } catch (a) {}
        if (t) {
            var n = t.indexOf(u);
            if (n >= 0) {
                var i = t.indexOf("&");
                0 > i && (i = t.indexOf(" ", n + 1)), e.adswizzContext = i > 0 ? t.substring(n + u.length, i) : t.substring(n + u.length), e.adswizzContext && (e.adswizzContext = T.unescape(e.adswizzContext))
            }
        }
        var o = t.indexOf(c);
        if (o >= 0) {
            var s = t.indexOf(" ", o + 1);
            e.duration = s > 0 ? parseInt(t.substring(o + c.length, s), 10) : parseInt(t.substring(o + c.length), 10)
        }
        var r = t.indexOf(d);
        if (r >= 0) {
            var l = t.indexOf(" ", r + 1);
            e.adID = l > 0 ? t.substring(r + d.length, l) : t.substring(r + d.length)
        }
        var m = t.indexOf(h);
        if (m >= 0) {
            var f = t.indexOf(" ", m + 1);
            e.insertionType = f > 0 ? t.substring(m + h.length, f) : t.substring(m + h.length)
        }
        var _ = t.indexOf(p);
        if (_ >= 0) {
            var g = t.indexOf(" ", _ + 1);
            e.companionZoneID = g > 0 ? t.substring(_ + p.length, g) : t.substring(_ + p.length)
        }
        return void 0, e
    }

    function o(t, e, a) {
        this.sdkInstance = t, this.metadataConnType = e, this.pollingInterval = a, this._lastMetadataTimestamp = -1, this._lastMetadataText = ""
    }

    function s(t, e) {
        var a = document.getElementsByTagName("body")[0],
            n = document.createElement("script");
        n.type = "text/javascript", n.src = t, a.appendChild(n)
    }

    function r() {
        this._isStreamPlaying = !1, this._timeoutsIdsMetadata = [], this._metadataQueue = [], this._audio = null, this._metadataConnectionCallbacks = {}, this._metadataChangedCallbacks = null, this._USE_SETTIMEOUT_FOR_SYNCHRONIZATION = !0, this._audioTimeupdateFunction = null, this._lastProcMetTime = -1, this._lastProcMetText = "", this._adBreakManager = null, this._metadataConnManager = null, this._companionAdManager = null, this.MetadataConnection = {
            AUTO: m,
            TIMED_POLLING: f,
            EVENT_STREAM: _,
            LONG_POLLING: g
        }, this.onReceivedDetailsInfo = null;
        var t = this;
        this.settings = {
            setMetadataConnectionType: function(e) {
                void 0, t._metadataConnManager && (t._metadataConnManager.metadataConnType = e)
            },
            setUseSetTimeoutForSynchronization: function(e) {
                t._USE_SETTIMEOUT_FOR_SYNCHRONIZATION = e, t._audio && (e ? t._audio.removeEventListener("timeupdate", t._audioTimeupdateFunction) : t._audio.addEventListener("timeupdate", t._audioTimeupdateFunction))
            },
            isUsingSetTimeoutForSynchronization: function() {
                return t._USE_SETTIMEOUT_FOR_SYNCHRONIZATION
            }
        }, this._audioTimeupdateFunction = function() {
            if (void 0, void 0, t._metadataQueue.length > 0 && 1e3 * this.currentTime >= t._metadataQueue[0].start - 100) {
                var e = t._metadataQueue.shift();
                t._upToDateMetadataCallback(e, 0), t._adBreakManager.processAdswizzAdData(e.awdAdData, 0)
            }
        }
    }
    t.prototype.stop = function() {
        null !== this.eventSourceObj && (this.eventSourceObj.close(), this.eventSourceObj = null)
    }, t.prototype.initialize = function(t) {
        return window.EventSource ? "" === t ? (void 0, !0) : null !== this.eventSourceObj ? (void 0, !0) : (this.metadataURL = t, t += "&details=1", void 0, this.runEventStream(t), !0) : (void 0, !1)
    }, t.prototype.runEventStream = function(t) {
        var e = this;
        this.eventSourceObj = new window.EventSource(t, {
            withCredentials: !0
        }), this.eventSourceObj.addEventListener("message", function(a) {
            var n = {
                    rawResponse: a.data,
                    eventId: a.lastEventId
                },
                i = -1 !== t.indexOf("&details=1");
            e.metadataManager.receivedMetadataConnectionResponse(C, _, n, i)
        }, !1), this.eventSourceObj.addEventListener("open", function(t) {}, !1), this.eventSourceObj.addEventListener("error", function(t) {}, !1)
    }, e.prototype.stop = function() {
        null !== this.pollingTimer && (clearTimeout(this.pollingTimer), this.pollingTimer = null), null !== this.pollingObj && (this.pollingObj.abort(), this.pollingObj.onreadystatechange = null, this.pollingObj = null)
    }, e.prototype.initialize = function(t, e, a) {
        return "" === t ? (void 0, !1) : null !== this.pollingObj ? (void 0, !1) : (this.metadataURL = t, this.pollingType = e, this.pollingInterval = a, this.runPolling(t + "&details=1"), !0)
    }, e.prototype.runPolling = function(t) {
        this.pollingObj = new XMLHttpRequest, this.pollingObj.withCredentials = !0, this.pollingObj.open("GET", t, !0);
        var e = this;
        this.pollingObj.onreadystatechange = function() {
            if (e.pollingObj.readyState === XMLHttpRequest.DONE) {
                if (200 === e.pollingObj.status && e.pollingObj.responseText) {
                    var a = {};
                    a.rawResponse = e.pollingObj.responseText;
                    var n = -1 !== t.indexOf("&details=1");
                    e.metadataManager.receivedMetadataConnectionResponse(C, e.pollingType, a, n)
                }
                404 !== e.pollingObj.status && (e.pollingTimer = setTimeout(function() {
                    null !== e.pollingObj && (e.pollingObj = null, e.runPolling(e.metadataURL))
                }, Math.max(200 !== e.pollingObj.status ? 2e3 : 0, e.pollingInterval)))
            }
        }, this.pollingObj.send()
    }, a.prototype.isAdBreak = function() {
        return this._adBreakCount > 0
    }, a.prototype.removeExecutedAdStartTimeoutId = function(t) {
        var e = this._timeoutsAdStart.indexOf(t);
        e > -1 && this._timeoutsAdStart.splice(e, 1)
    }, a.prototype.removeExecutedAdFinishTimeoutId = function(t) {
        var e = this._timeoutsAdFinish.indexOf(t);
        e > -1 && this._timeoutsAdFinish.splice(e, 1)
    }, a.prototype.adswizzAdStarted = function(t, e) {
        void 0, this._adBreakCount++, this.removeExecutedAdStartTimeoutId(e), this.sdkInstance.adswizzAdStarted(t)
    }, a.prototype.adswizzAdFinished = function(t, e) {
        void 0, this._adBreakCount--, this.removeExecutedAdFinishTimeoutId(e), this.isAdBreak() || this.sdkInstance.adswizzAdFinished(t)
    }, a.prototype.processAdswizzAdData = function(t, e) {
        var a = t && t.adID && t.duration > 0;
        if (this._lastAdID = t ? t.adID : null, a) {
            var n = this,
                i = Math.max(e - 200, 0),
                o = setTimeout(function() {
                    n.adswizzAdStarted(t, o)
                }, i);
            this._timeoutsAdStart.push(o);
            var s = setTimeout(function() {
                n.adswizzAdFinished(!1, s)
            }, i + t.duration + 1500);
            this._timeoutsAdFinish.push(s)
        }
    }, a.prototype.onStop = function() {
        for (var t = 0; t < this._timeoutsAdStart.length; t++) void 0, clearTimeout(this._timeoutsAdStart[t]);
        for (t = 0; t < this._timeoutsAdFinish.length; t++) void 0, clearTimeout(this._timeoutsAdFinish[t]);
        this._adBreakCount = 0, this._timeoutsAdStart = [], this._timeoutsAdFinish = []
    }, n.prototype.alwaysDisplayCompanionAds = function() {
        return T.isRealValue(this.companionBanner) && this.companionBanner.alwaysDisplayAds
    }, n.prototype.adStarted = function(t) {
        this.stopFillerAutoRefresh(), this.loadAds(t), this.alwaysDisplayCompanionAds() || (this._outOfContextTimer && (clearInterval(this._outOfContextTimer), this._outOfContextTimer = null), this.companionBanner.willDisplayListener && "function" == typeof this.companionBanner.willDisplayListener && this.companionBanner.willDisplayListener())
    }, n.prototype.adFinished = function(t) {
        if (this.alwaysDisplayCompanionAds() && !t && this.startFillerAutoRefresh(), !this.alwaysDisplayCompanionAds() && this.companionBanner.outOfContextListener && "function" == typeof this.companionBanner.outOfContextListener) {
            var e = this;
            this._outOfContextTimer = setTimeout(function() {
                e.companionBanner.outOfContextListener()
            }, 1e3)
        }
    }, n.prototype.loadAds = function(t) {
        var e = this.getCompanionAdURL(t.adswizzContext, t.companionZoneID);
        this.companionBanner.container.innerHTML = "<iframe src=" + e + ' width="100%" height="100%" scrolling="no" frameborder="no"></iframe>'
    }, n.prototype.startFillerAutoRefresh = function() {
        this.loadCompanionBannerWithFiller();
        var t = this;
        this._refreshFillerTimer = setInterval(function() {
            t.loadCompanionBannerWithFiller()
        }, t.fallbackRefreshInterval)
    }, n.prototype.stopFillerAutoRefresh = function() {
        this._refreshFillerTimer && (clearInterval(this._refreshFillerTimer), this._refreshFillerTimer = null), this._onStartTimer && (clearInterval(this._onStartTimer), this._onStartTimer = null)
    }, n.prototype.loadCompanionBannerWithFiller = function() {
        this.companionBanner.container && (this.companionBanner.container.innerHTML = "<iframe src=" + this.getCompanionFillerURL() + ' width="100%" height="100%" scrolling="no" frameborder="no"></iframe>')
    }, n.prototype.onStart = function() {
        if (this.alwaysDisplayCompanionAds()) {
            var t = this;
            this._onStartTimer = setTimeout(function() {
                t.startFillerAutoRefresh()
            }, 1500)
        }
    }, n.prototype.onStop = function() {
        this.stopFillerAutoRefresh(), this.companionBanner.container && (this.companionBanner.container.innerHTML = "stopped")
    }, n.prototype.getCompanionAdURL = function(t, e) {
        var a = this.getCompanionFillerURL();
        return t && t.length > 0 && (e && e.length > 0 ? a = this.companionBanner.baseURL + "?zoneId=" + e + "&context=" + t : this.companionBanner && this.companionBanner.zoneId && this.companionBanner.zoneId.length > 0 && (a = this.companionBanner.baseURL + "?zoneId=" + this.companionBanner.zoneId + "&context=" + t)), a
    }, n.prototype.getCompanionFillerURL = function() {
        return this.companionBanner.baseURL + "?zoneId=" + this.companionBanner.fallbackZoneId
    }, o.prototype.init = function(a) {
        var n = T.getBaseURL(a) + "/metadata?type=json&cb=" + Math.floor(1e11 * Math.random()),
            i = n + "&longPolling=true";
        switch (this.metadataConnType) {
            case m:
            case f:
                this.pollingConn = new e(this), this.pollingConn.initialize(n, f, this.pollingInterval);
                break;
            case g:
                this.pollingConn = new e(this), this.pollingConn.initialize(i, g, 100);
                break;
            case _:
                this.eventSource = new t(this), this.eventSource.initialize(n);
                break;
            default:
                void 0
        }
        this.sdkInstance._internalTriggerMetadataConnectionCallbacks("init", this.metadataConnType === g ? i : n)
    }, o.prototype.stopMetadata = function() {
        this.eventSource && this.eventSource.stop(), this.pollingConn && this.pollingConn.stop(), this._lastMetadataTimestamp = -1, this._lastMetadataText = "", this.sdkInstance._internalTriggerMetadataConnectionCallbacks("stop", "")
    }, o.prototype.isNewMetadata = function(t) {
        if (0 === t.length) return !1;
        var e = t.length - 1,
            a = t[e];
        return a.start !== this._lastMetadataTimestamp || a.metadata !== this._lastMetadataText ? (this._lastMetadataTimestamp = a.start, this._lastMetadataText = a.metadata, !0) : !1
    }, o.prototype.receivedMetadataConnectionResponse = function(t, e, a, n) {
        var o = [],
            s = null;
        switch (t) {
            case C:
                if (a && a.rawResponse) {
                    var r = JSON.parse(a.rawResponse);
                    if (r["metadata-list"] && r["metadata-list"].constructor === Array)
                        for (var l = r["metadata-list"], d = 0; d < l.length; d++) {
                            var c = l[d];
                            c.start = parseInt(c.start, 10), c.awdAdData = i(c.metadata), o.push(c)
                        }
                    n && (s = {}, s["icy-br"] = r["icy-br"], s["icy-description"] = r["icy-desription"], s["icy-genre"] = r["icy-genre"], s["icy-pub"] = r["icy-pub"], s["session-id"] = r["session-id"], s.version = r.version)
                }
                break;
            case v:
        }
        this.isNewMetadata(o) && this.sdkInstance.processReceivedParsedMetadata(e, a.rawResponse, o, s)
    };
    var l = "1.0.15",
        d = "adId=",
        c = "durationMilliseconds=",
        u = "adswizzContext=",
        h = "insertionType=",
        p = "companionZoneId=",
        m = 0,
        f = 1,
        _ = 2,
        g = 3,
        v = 0,
        C = 2,
        T = {
            isRealValue: function(t) {
                return t && "null" !== t && "undefined" !== t
            },
            getBaseURL: function(t) {
                var e = t.split("/"),
                    a = e[0],
                    n = e[2];
                return a + "//" + n
            },
            unescape: window.decodeURIComponent
        };
    ! function() {
        "undefined" == typeof com_adswizz_synchro_decorateUrl && (s("https://synchrobox.adswizz.com/register2.php"), s("https://cdn.adswizz.com/adswizz/js/SynchroClient2.js"))
    }(), window.adswizzSDK = new r, r.prototype.getVersion = function() {
        return l
    }, r.prototype.init = function(t) {
        function e(t) {
            i(), l._isStreamPlaying = !0, l._metadataConnManager.init(t), l._companionAdManager && l._companionAdManager.onStart()
        }

        function i() {
            l._isStreamPlaying = !1, l._metadataConnManager && l._metadataConnManager.stopMetadata(), l._adBreakManager && l._adBreakManager.onStop(), l._companionAdManager && l._companionAdManager.onStop();
            for (var t = 0; t < l._timeoutsIdsMetadata.length; t++) clearTimeout(l._timeoutsIdsMetadata[t]);
            l._timeoutsIdsMetadata = [], l._lastProcMetTime = -1, l._lastProcMetText = ""
        }
        if (!T.isRealValue(t)) return void void 0;
        if (!T.isRealValue(t.contentPlayer)) return void void 0;
        var s = f,
            r = 2e3;
        T.isRealValue(t.metadata) && (T.isRealValue(t.metadata.connectionType) && (s = t.metadata.connectionType), T.isRealValue(t.metadata.listeners) && (this._metadataChangedCallbacks = t.metadata.listeners), T.isRealValue(t.metadata.pollingInterval) && (r = t.metadata.pollingInterval));
        var l = this;
        this._audio = t.contentPlayer, this._audio.addEventListener("playing", function() {
            e(this.src)
        }, !0), this._audio.addEventListener("pause", function() {
            i()
        }, !0), this._audio.addEventListener("ended", function() {
            i()
        }, !0), this._USE_SETTIMEOUT_FOR_SYNCHRONIZATION || (void 0, this._audio.addEventListener("timeupdate", this._audioTimeupdateFunction)), this._metadataConnManager = new o(this, s, r), this._adBreakManager = new a(this), T.isRealValue(t.companionBanner) && T.isRealValue(t.companionBanner.container) && (this._companionAdManager = new n(t.companionBanner))
    }, r.prototype.adswizzAdStarted = function(t) {
        this._companionAdManager && this._companionAdManager.adStarted(t)
    }, r.prototype.adswizzAdFinished = function(t) {
        this._companionAdManager && this._companionAdManager.adFinished(t)
    }, r.prototype.addMetadataChangedListener = function(t) {
        if ("function" != typeof t) return void void 0;
        this._metadataChangedCallbacks = this._metadataChangedCallbacks || [];
        for (var e = 0; e < this._metadataChangedCallbacks.length; e++)
            if (this._metadataChangedCallbacks[e] === t) return void void 0;
            "function" == typeof t && this._metadataChangedCallbacks.push(t)
    }, r.prototype.removeMetadataChangedListener = function(t) {
        this._metadataChangedCallbacks = this._metadataChangedCallbacks || [];
        var e = this._metadataChangedCallbacks.indexOf(t);
        e > -1 ? this._metadataChangedCallbacks.splice(e, 1) : void 0
    }, r.prototype.addMetadataConnectionListener = function(t, e) {
        this._metadataConnectionCallbacks[t] = this._metadataConnectionCallbacks[t] || [], "function" == typeof e && this._metadataConnectionCallbacks[t].push(e)
    }, r.prototype._internalTriggerMetadataConnectionCallbacks = function(t, e) {
        var a = this._metadataConnectionCallbacks[t];
        if (T.isRealValue(a)) {
            if (a.constructor !== Array) return void void 0;
            for (var n = 0; n < a.length; n++) {
                var i = a[n];
                setTimeout(i, 0, e)
            }
        }
    }, r.prototype._removeExecutedTimeoutId = function(t) {
        var e = this._timeoutsIdsMetadata.indexOf(t);
        e > -1 && this._timeoutsIdsMetadata.splice(e, 1)
    }, r.prototype._upToDateMetadataCallback = function(t, e) {
        function a() {
            var e = Math.floor(1e3 * n._audio.currentTime) - t.start;
            if (void 0, n._metadataChangedCallbacks.constructor === Array)
                for (var a = 0; a < n._metadataChangedCallbacks.length; a++) {
                    var i = n._metadataChangedCallbacks[a];
                    "function" == typeof i && i(t.metadata)
                }
        }
        if (this._metadataChangedCallbacks) {
            var n = this;
            if (0 === e) return void a();
            var i = setTimeout(function() {
                n._removeExecutedTimeoutId(i), a()
            }, e);
            this._timeoutsIdsMetadata.push(i)
        }
    }, r.prototype.getLastProcMetIndex = function(t) {
        for (var e = 0; e < t.length; e++) {
            var a = t[e];
            if (a.start === this._lastProcMetTime && a.metadata === this._lastProcMetText) return e
        }
        return -1
    }, r.prototype.processReceivedParsedMetadata = function(t, e, a, n) {
        for (var i = this.getLastProcMetIndex(a), o = i + 1; o < a.length; o++) {
            var s = a[o];
            if (this._USE_SETTIMEOUT_FOR_SYNCHRONIZATION) {
                var r = this._audio && !this._audio.paused ? this._audio.currentTime : 0,
                    l = Math.floor(Math.max(s.start - 1e3 * r, 0));
                void 0, this._upToDateMetadataCallback(s, l), this._adBreakManager.processAdswizzAdData(s.awdAdData, l)
            } else this._metadataQueue.push(s);
            o === a.length - 1 && (this._lastProcMetTime = s.start, this._lastProcMetText = s.metadata)
        }
        n && this.onReceivedDetailsInfo && "function" == typeof this.onReceivedDetailsInfo && this.onReceivedDetailsInfo(n);
        var d = (t === _ ? "EVENT_SOURCE" : t === g ? "LONG_POLLING" : "TIMED_POLLING") + "\n	Response: " + e + "\n	Audio Pos: " + this._audio.currentTime + "\n\n";
        this._internalTriggerMetadataConnectionCallbacks("message", d)
    }, r.prototype.decorateURL = function(t) {
        com_adswizz_synchro_decorateUrl && "function" == typeof com_adswizz_synchro_decorateUrl && -1 === t.indexOf("listenerid=") && (t = com_adswizz_synchro_decorateUrl(t));
        var e = t.replace("https://", "");
        e = e.replace("https://", "");
        var a = "";
        return a = -1 === e.indexOf("/") ? "/?" : e.lastIndexOf("/") === e.length - 1 ? "?" : -1 !== e.indexOf("?") ? "&" : "?", t += a + "aw_0_1st.version=" + encodeURIComponent(l + ":html5")
    }
}();